<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MED fichier: MEDmemFileOpen</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Généré par Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Documentation&nbsp;MED</span></a></li>
      <li><a href="pages.html"><span>Guides&nbsp;d'utilisation</span></a></li>
      <li><a href="modules.html"><span>Guides&nbsp;de&nbsp;référence</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
  <div class="navpath"><a class="el" href="a01043.html">Guide de référence du module MEDfile</a>
  </div>
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindex" href="a01043_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01043_ga9c728192b1e39a31a7da0005fb4a8a41.html#ga9c728192b1e39a31a7da0005fb4a8a41">MEDfileCommentRd</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01043_ga08d625f5403fefb9deb7d47f9a915c41.html#ga08d625f5403fefb9deb7d47f9a915c41">MEDfileCommentWr</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01043_gac3e0eb335c4d611cbbeaf7688050f054.html#gac3e0eb335c4d611cbbeaf7688050f054">MEDfileCompatibility</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01043_gad5971dbf21f94662221389ad1d1b4d80.html#gad5971dbf21f94662221389ad1d1b4d80">MEDfileName</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01043_gaec83c9561b5640ca32a12e58c5d2e10d.html#gaec83c9561b5640ca32a12e58c5d2e10d">MEDfileNumVersionRd</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01043_ga48b7eb3761d58928eb0e0b12d481e05a.html#ga48b7eb3761d58928eb0e0b12d481e05a">MEDfileObjectsMount</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01043_ga295bfb2838ed08bf156ced79e291c7f1.html#ga295bfb2838ed08bf156ced79e291c7f1">MEDfileObjectsMountById</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01043_ga73ad912a369c3da7f22caf482093e47b.html#ga73ad912a369c3da7f22caf482093e47b">MEDfileObjectsUnmount</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01043_ga9376a1654b7bf099c3f8941074c5fdfb.html#ga9376a1654b7bf099c3f8941074c5fdfb">MEDfileOpen</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01043_gab157547245a875e72a53847f64468855.html#gab157547245a875e72a53847f64468855">MEDfileStrVersionRd</a></td></tr>
          <tr><td class="navtab"><a class="qindexHL" href="a01043_ga8855a4aa07a931477671c8c877b6f3ed.html#ga8855a4aa07a931477671c8c877b6f3ed">MEDmemFileOpen</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="a01043_gad5a6655e312d3e5146f358c42c7c904f.html#gad5a6655e312d3e5146f358c42c7c904f">MEDparFileOpen</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top">
<a class="anchor" id="ga8855a4aa07a931477671c8c877b6f3ed"></a><!-- doxytag: member="MEDmemFileOpen.c::MEDmemFileOpen" ref="ga8855a4aa07a931477671c8c877b6f3ed" args="(const char *const filename, med_memfile *const memfile, const med_bool filesync, const med_access_mode accessmode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00332_afa4ec8284026c8c5545e5333475fb65a.html#afa4ec8284026c8c5545e5333475fb65a">med_idt</a> MEDmemFileOpen </td>
          <td>(</td>
          <td class="paramtype">const char *const &nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00252.html">med_memfile</a> *const &nbsp;</td>
          <td class="paramname"> <em>memfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00332_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190dee">med_bool</a>&nbsp;</td>
          <td class="paramname"> <em>filesync</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00332_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85">med_access_mode</a>&nbsp;</td>
          <td class="paramname"> <em>accessmode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Ouverture d'un fichier MED pour une utilisation en mémoire. </p>
<dl><dt><b>Paramètres:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>Nom du fichier. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>memfile</em>&nbsp;</td><td>fichier mémoire. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filesync</em>&nbsp;</td><td>synchronise ou non le fichier mémoire avec un fichier disque. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>accessmode</em>&nbsp;</td><td>Mode d'acces au fichier. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Valeurs retournées:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>med_idt</em>&nbsp;</td><td>Identificateur du fichier.</td></tr>
  </table>
  </dd>
</dl>
<p>Cette routine permet de créer, lire ou modifier un fichier mémoire au format MED. Le contenu du fichier mémoire peut-être crée par les appels habituels de l'API MED ou initialisé à partir d'un fichier MED existant.Une fois le fichier mémoire fermé par <a class="el" href="a01043_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>, le fichier mémoire reste disponible pour être transmis et de nouveau ouvert/modifié par un nouvel appel à MEDmemFileOpen. </p>
<dl class="user"><dt><b>Remarques</b></dt><dd></dd></dl>
<dl class="user"><dt><b>Gestion de la mémoire:</b></dt><dd><ul>
<li>Si (<em>memfile.app_image_ptr</em> == 0) : La place mémoire utilisée par les différents appels medfichier sera allouée par medfichier et accessible par le pointeur <em>medfile.image_ptr</em>. L'emprise mémoire utilisée par l'ensemble des appels à medfichier est indiquée dans <em>memfile.app_image_size</em> au fil des appels. La désallocation est à la charge de l'utilisateur. </li>
<li>Si (<em>memfile.app_image_ptr</em> &lt;&gt; 0) et (<em>memfile.app_image_size</em> &lt;&gt; 0) : Si l'utilisateur a pré-alloué un emplacement d'acceuil au fichier mémoire, cet emplacement sera utilisé par MED dans les différentes fonctions de l'API. Si la taille réservée est insuffisante, MED réallouera la taille nécessaire et mettra à jour le champ <em>memfile.app_image_size</em>. Ce mécanisme suppose que l'utilisateur n'utilise pas d'alias du pointeur <em>memfile.app_image_ptr</em> de façon concurrente à MED. Il est de la responsabilité de l'utilisateur de prendre connaissance des eventuels changements de taille et de valeur du pointeur. Après l'appel à <a class="el" href="a01043_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a>, MED n'utilise plus l'image mémoire. Il est possible de vérifier qu'il n'existe plus d'accès à l'image mémoire en s'assurant que <em>memfile.fapl_ref_count</em> et <em>memfile.vfd_ref_count</em> sont tous les deux nuls. </li>
</ul>
</dd></dl>
<dl class="user"><dt><b>Gestion des droits et fichier disque:</b></dt><dd></dd></dl>
<p>Si le paramètre <em>syncfile</em> est à <a class="el" href="a00332_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a>, <a class="el" href="a01043_ga8855a4aa07a931477671c8c877b6f3ed.html#ga8855a4aa07a931477671c8c877b6f3ed">MEDmemFileOpen</a> ne s'occupera pas de la présence d'un fichier disque de même nom que l'image mémoire. Si le paramètre syncfile est à <a class="el" href="a00332_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deeaa9f40f3cd6611d437c39900c63ce80c4">MED_TRUE</a>, <a class="el" href="a01043_ga8855a4aa07a931477671c8c877b6f3ed.html#ga8855a4aa07a931477671c8c877b6f3ed">MEDmemFileOpen</a> gardera la cohérence entre le fichier disque crée ou déjà présent et l'image mémoire en fonction du mode d'accès demandé.</p>
<ul>
<li>Mode <a class="el" href="a00332_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85a09bafcc9e6dad89588c12c9d6a9efa12">MED_ACC_RDEXT</a> : Mode interdit.</li>
<li>Mode <a class="el" href="a00332_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85aa23dd1c18b596924d5f50c8402b84c8e">MED_ACC_CREAT</a> : Si <em>filesync</em> == <a class="el" href="a00332_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a> : Un nouvel accès <em>fid</em> au fichier mémoire <em>memfile</em> est crée, aucun fichier disque n'est utilisé (un fichier disque de même nom peut exister mais ne sera pas utilisé). Si le fichier mémoire possédait une image MED valide, elle sera réinitialisée. Si <em>filesync</em> == <a class="el" href="a00332_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deeaa9f40f3cd6611d437c39900c63ce80c4">MED_TRUE</a> : Un nouvel accès <em>fid</em> au fichier mémoire <em>memfile</em> est crée, un nouveau fichier disque de même nom est également crée (un fichier disque de même nom peut déjà exister, il sera alors écrasé). Tous les appels MED seront effectués en mémoire et sur le fichier jusqu'à l'appel de <a class="el" href="a01043_ga12a0e901c376be997a41a073ce426283.html#ga12a0e901c376be997a41a073ce426283">MEDfileClose</a> (pas forcément de façon synchrone jusqu'à la fermeture).</li>
<li>Mode <a class="el" href="a00332_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85ab53f10a6b700d1087d7a50710fe29f00">MED_ACC_RDWR</a> : Si <em>filesync</em> == <a class="el" href="a00332_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a> : Un nouvel accès <em>fid</em> au fichier mémoire <em>memfile</em> existant et valide est crée qu'un fichier disque de même nom existe ou non. Les appels MED seront effectués uniquement en mémoire. Si <em>filesync</em> == <a class="el" href="a00332_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deeaa9f40f3cd6611d437c39900c63ce80c4">MED_TRUE</a> : Un nouvel accès <em>fid</em> au fichier mémoire <em>memfile</em> est crée.S'il n'existe pas de fichier disque de même nom, l'image memfile doit exister et être valide; un fichier disque de même nom est crée et maintenu en cohérence.S'il existe un fichier disque de même nom, l'image <em>memfile</em> est réinitialisée par le contenu du fichier. La cohérence est maintenue entre fichier mémoire et fichier disque.</li>
<li>Mode <a class="el" href="a00332_adcd0322de9fec3b5e199ffeda3f44c85.html#adcd0322de9fec3b5e199ffeda3f44c85a616bf8345c622a34f0787f42eb400f25">MED_ACC_RDONLY</a> : <em>filesync</em> = <a class="el" href="a00332_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deeaa9f40f3cd6611d437c39900c63ce80c4">MED_TRUE</a> | <a class="el" href="a00332_a23f7fa6d76886ed3c91dc33b59190dee.html#a23f7fa6d76886ed3c91dc33b59190deea30b70cc2a253ed4141db9a78ba696046">MED_FALSE</a> : Le fichier mémoire est initialisé à partir d' un fichier disque de même nom (forcément existant). Les appels MED en lecture seront effectués uniquement en mémoire, le fichier restera dans son état intial. Les appels MED en écriture échoueront. </li>
</ul>

<p>Définition à la ligne <a class="el" href="a00558_source.html#l00043">43</a> du fichier <a class="el" href="a00558_source.html">MEDmemFileOpen.c</a>.</p>

</div>
</div>
    </td>
  </tr>
</table>
</div>
<hr size="1"/><address style="text-align: right;"><small>Généré le Thu Jan 21 18:07:07 2016 pour MED fichier par&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
